# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

EnumMap:
    AggregationNode:
        Step: AggregationNodeStep

    ExchangeNode:
        Type: ExchangeNodeType
        Scope: ExchangeNodeScope

    LimitNode:
        Step: LimitNodeStep

    SelectedRole:
        Type: SelectedRoleType

    SampleNode:
        Type: SampleNodeType

ExtraFields:
    RowExpression:
      std::shared_ptr<SourceLocation>: sourceLocation

    Aggregation:
        FunctionHandle:      functionHandle
        List<RowExpression>: arguments

    PlanNode:
        PlanNodeId:          id

    RemoteTransactionHandle:
        Optional<String>:    dummy

AddToOutput:
    - NodeState

AbstractClasses:
    ColumnHandle:
      super: JsonEncodedSubclass
      comparable: true
      subclasses:
        - { name: HiveColumnHandle,         key: hive }
        - { name: IcebergColumnHandle,      key: hive-iceberg }
        - { name: TpchColumnHandle,         key: tpch }
        - { name: SystemColumnHandle,       key: $system@system }

    ConnectorPartitioningHandle:
      super: JsonEncodedSubclass
      subclasses:
        - { name: SystemPartitioningHandle, key: $remote }
        - { name: HivePartitioningHandle,   key: hive}
        - { name: TpchPartitioningHandle,   key: tpch}

    ConnectorTableHandle:
      super: JsonEncodedSubclass
      subclasses:
        - { name: HiveTableHandle,          key: hive }
        - { name: IcebergTableHandle,       key: hive-iceberg }
        - { name: TpchTableHandle,          key: tpch }
        - { name: SystemTableHandle,        key: $system@system }

    ConnectorOutputTableHandle:
      super: JsonEncodedSubclass
      subclasses:
        - { name: HiveOutputTableHandle,          key: hive }


JavaClasses:
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/FileContent.java
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/FileFormat.java
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/IcebergSplit.java
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/IcebergTableHandle.java
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/IcebergTableName.java
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/IcebergTableType.java
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/IcebergTableLayoutHandle.java
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/IcebergColumnHandle.java
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/ColumnIdentity.java
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/delete/DeleteFile.java
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/changelog/ChangelogOperation.java
  - presto-iceberg/src/main/java/com/facebook/presto/iceberg/changelog/ChangelogSplitInfo.java